{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amang\\\\CODE\\\\chat-app-using-react\\\\frontend\\\\src\\\\Cjat.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Chat({\n  socket,\n  user,\n  room\n}) {\n  _s();\n  // Changed Cjat to Chat\n  const [message, setMess] = useState(\"\"); // Changed setMess to setMessage\n  const [messages, setMessages] = useState([]);\n  const send = async () => {\n    if (message !== \"\") {\n      const mess = {\n        room: room,\n        sender: user,\n        message: message,\n        position: \"right\"\n      };\n      setMessages(prevMessages => [...prevMessages, mess]);\n      await socket.emit(\"send\", mess);\n      setMess(\"\");\n    }\n  };\n  useEffect(() => {\n    const handleLost = chatMessage => {\n      console.log(\"getted\");\n      console.log(chatMessage);\n      if (Array.isArray(chatMessage)) {\n        console.log(\"arrayed\");\n        const updatedMessages = chatMessage.map(item => {\n          if (item.user === item.sender) {\n            return {\n              ...item,\n              position: \"right\"\n            };\n          } else {\n            return {\n              ...item,\n              position: \"left\"\n            };\n          }\n        });\n        setMessages(updatedMessages);\n        setMessages(updatedMessages);\n      }\n    };\n    const handleReceive = message => {\n      setMessages(prevMessages => [...prevMessages, message]);\n    };\n    const joined = message => {\n      console.log(\"##################################################################################################################S\");\n      setMessages(nosse => [...nosse, message]);\n    };\n    const dist = messa => {\n      setMessages(no => [...no, messa]);\n    };\n    socket.on(\"lost\", handleLost);\n    socket.on(\"new-receive\", handleReceive); // Corrected event name\n    socket.on(\"userjoined\", joined);\n    socket.on(\"dist\", dist);\n    return () => {\n      socket.off(\"lost\", handleLost);\n      socket.off(\"new-receive\", handleReceive); // Corrected event name\n      socket.off(\"userjoined\", joined);\n      socket.off(\"dist\", dist);\n    };\n  }, [socket]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"footr\",\n        children: \"chat window\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"window\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages\",\n        children: messages == [] ? \"\" : messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message ${message.position}`,\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [message.sender || message.name, \": \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 7\n          }, this), message.message]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 5\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"foot\",\n        required: true,\n        autoFocus: true,\n        type: \"text\",\n        value: message,\n        onChange: e => setMess(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: send,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"wEjhWs+LZ8mHDE/p+fFnmaig0GI=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","Chat","socket","user","room","_s","message","setMess","messages","setMessages","send","mess","sender","position","prevMessages","emit","handleLost","chatMessage","console","log","Array","isArray","updatedMessages","map","item","handleReceive","joined","nosse","dist","messa","no","on","off","children","className","fileName","_jsxFileName","lineNumber","columnNumber","name","required","autoFocus","type","value","onChange","e","target","onClick","_c","$RefreshReg$"],"sources":["C:/Users/amang/CODE/chat-app-using-react/frontend/src/Cjat.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./App.css\";\r\n\r\nfunction Chat({ socket, user, room }) { // Changed Cjat to Chat\r\n  const [message, setMess] = useState(\"\"); // Changed setMess to setMessage\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  const send = async () => {\r\n    if (message !== \"\") {\r\n      const mess = {\r\n        room: room,\r\n        sender: user,\r\n        message: message,\r\n        position: \"right\",\r\n      };\r\n      setMessages(prevMessages => [...prevMessages, mess]);\r\n      await socket.emit(\"send\", mess);\r\n      setMess(\"\");\r\n    }\r\n  };\r\n  \r\n\r\n  useEffect(() => {\r\n    const handleLost = (chatMessage) => {\r\n      console.log(\"getted\")\r\n      console.log(chatMessage)\r\n      if (Array.isArray(chatMessage)) {\r\n        console.log(\"arrayed\")\r\n        const updatedMessages = chatMessage.map((item) => {\r\n          if (item.user === item.sender) {\r\n            return {\r\n              ...item,\r\n              position: \"right\",\r\n            };\r\n          } else {\r\n            return { ...item, position: \"left\" };\r\n          }\r\n        \r\n        });\r\n        setMessages(updatedMessages);\r\n      \r\n    \r\n    \r\n      setMessages(updatedMessages);\r\n    }};\r\n\r\n    const handleReceive = (message) => {\r\n      setMessages((prevMessages) => [...prevMessages,message]);\r\n    };\r\n    const joined=(message)=>{\r\n      console.log(\"##################################################################################################################S\")\r\n      setMessages((nosse)=>[...nosse,message]);\r\n    };\r\n    const dist=(messa)=>{\r\n      setMessages((no)=>[...no,messa]);\r\n    };\r\n    socket.on(\"lost\", handleLost);\r\n    socket.on(\"new-receive\", handleReceive); // Corrected event name\r\n    socket.on(\"userjoined\",joined)\r\n    socket.on(\"dist\",dist)\r\n    return () => {\r\n      socket.off(\"lost\", handleLost);\r\n      socket.off(\"new-receive\", handleReceive); // Corrected event name\r\n      socket.off(\"userjoined\",joined)\r\n      socket.off(\"dist\",dist)\r\n    \r\n    };\r\n  }, [socket]);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"header\">\r\n        <p className=\"footr\">chat window</p>\r\n      </div>\r\n      <div className=\"window\">\r\n      <div className=\"messages\">\r\n        {messages==[]?\"\":\r\n  messages.map((message) => (\r\n    <div\r\n      className={`message ${message.position}`}\r\n    >\r\n      <strong>{message.sender||message.name}: </strong>{message.message}\r\n    </div>\r\n  ))}\r\n</div>\r\n\r\n      </div>\r\n      <div className=\"footer\">\r\n        <input className=\"foot\"\r\n        required \r\n        autoFocus\r\n          type=\"text\"\r\n          value={message}\r\n          onChange={(e) => setMess(e.target.value)}\r\n        />\r\n        <button onClick={send}>Send</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}