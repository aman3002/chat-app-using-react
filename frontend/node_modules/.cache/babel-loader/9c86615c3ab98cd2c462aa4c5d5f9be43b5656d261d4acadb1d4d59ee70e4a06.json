{"ast":null,"code":"import _objectSpread from\"C:/Users/amang/CODE/chat-app-using-react/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/amang/CODE/chat-app-using-react/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/amang/CODE/chat-app-using-react/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/amang/CODE/chat-app-using-react/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/amang/CODE/chat-app-using-react/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(_ref){var socket=_ref.socket,user=_ref.user,room=_ref.room;// Changed Cjat to Chat\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMess=_useState2[1];// Changed setMess to setMessage\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var send=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var mess;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(message!==\"\")){_context.next=6;break;}mess={room:room,sender:user,message:message,position:\"right\"};setMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[mess]);});_context.next=5;return socket.emit(\"send\",mess);case 5:setMess(\"\");case 6:case\"end\":return _context.stop();}},_callee);}));return function send(){return _ref2.apply(this,arguments);};}();useEffect(function(){var handleLost=function handleLost(chatMessage){console.log(\"getted\");console.log(chatMessage);if(Array.isArray(chatMessage)){console.log(\"arrayed\");var updatedMessages=chatMessage.map(function(item){if(item.user===item.sender){return _objectSpread(_objectSpread({},item),{},{position:\"right\"});}else{return _objectSpread(_objectSpread({},item),{},{position:\"left\"});}});setMessages(updatedMessages);setMessages(updatedMessages);}};var handleReceive=function handleReceive(message){setMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[message]);});};var joined=function joined(message){console.log(\"##################################################################################################################S\");setMessages(function(nosse){return[].concat(_toConsumableArray(nosse),[message]);});};var dist=function dist(messa){setMessages(function(no){return[].concat(_toConsumableArray(no),[messa]);});};socket.on(\"lost\",handleLost);socket.on(\"new-receive\",handleReceive);// Corrected event name\nsocket.on(\"userjoined\",joined);socket.on(\"dist\",dist);return function(){socket.off(\"lost\",handleLost);socket.off(\"new-receive\",handleReceive);// Corrected event name\nsocket.off(\"userjoined\",joined);socket.off(\"dist\",dist);};},[socket]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"footr\",children:\"chat window\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"window\",children:/*#__PURE__*/_jsx(\"div\",{className:\"messages\",children:messages==[]?\"\":messages.map(function(message){return/*#__PURE__*/_jsxs(\"div\",{className:\"message \".concat(message.position),children:[/*#__PURE__*/_jsxs(\"strong\",{children:[message.sender||message.name,\": \"]}),message.message]});})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"foot\",required:true,autoFocus:true,type:\"text\",value:message,onChange:function onChange(e){return setMess(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:send,children:\"Send\"})]})]});}export default Chat;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Chat","_ref","socket","user","room","_useState","_useState2","_slicedToArray","message","setMess","_useState3","_useState4","messages","setMessages","send","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","mess","wrap","_callee$","_context","prev","next","sender","position","prevMessages","concat","_toConsumableArray","emit","stop","apply","arguments","handleLost","chatMessage","console","log","Array","isArray","updatedMessages","map","item","_objectSpread","handleReceive","joined","nosse","dist","messa","no","on","off","children","className","name","required","autoFocus","type","value","onChange","e","target","onClick"],"sources":["C:/Users/amang/CODE/chat-app-using-react/frontend/src/Cjat.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./App.css\";\r\n\r\nfunction Chat({ socket, user, room }) { // Changed Cjat to Chat\r\n  const [message, setMess] = useState(\"\"); // Changed setMess to setMessage\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  const send = async () => {\r\n    if (message !== \"\") {\r\n      const mess = {\r\n        room: room,\r\n        sender: user,\r\n        message: message,\r\n        position: \"right\",\r\n      };\r\n      setMessages(prevMessages => [...prevMessages, mess]);\r\n      await socket.emit(\"send\", mess);\r\n      setMess(\"\");\r\n    }\r\n  };\r\n  \r\n\r\n  useEffect(() => {\r\n    const handleLost = (chatMessage) => {\r\n      console.log(\"getted\")\r\n      console.log(chatMessage)\r\n      if (Array.isArray(chatMessage)) {\r\n        console.log(\"arrayed\")\r\n        const updatedMessages = chatMessage.map((item) => {\r\n          if (item.user === item.sender) {\r\n            return {\r\n              ...item,\r\n              position: \"right\",\r\n            };\r\n          } else {\r\n            return { ...item, position: \"left\" };\r\n          }\r\n        \r\n        });\r\n        setMessages(updatedMessages);\r\n      \r\n    \r\n    \r\n      setMessages(updatedMessages);\r\n    }};\r\n\r\n    const handleReceive = (message) => {\r\n      setMessages((prevMessages) => [...prevMessages,message]);\r\n    };\r\n    const joined=(message)=>{\r\n      console.log(\"##################################################################################################################S\")\r\n      setMessages((nosse)=>[...nosse,message]);\r\n    };\r\n    const dist=(messa)=>{\r\n      setMessages((no)=>[...no,messa]);\r\n    };\r\n    socket.on(\"lost\", handleLost);\r\n    socket.on(\"new-receive\", handleReceive); // Corrected event name\r\n    socket.on(\"userjoined\",joined)\r\n    socket.on(\"dist\",dist)\r\n    return () => {\r\n      socket.off(\"lost\", handleLost);\r\n      socket.off(\"new-receive\", handleReceive); // Corrected event name\r\n      socket.off(\"userjoined\",joined)\r\n      socket.off(\"dist\",dist)\r\n    \r\n    };\r\n  }, [socket]);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"header\">\r\n        <p className=\"footr\">chat window</p>\r\n      </div>\r\n      <div className=\"window\">\r\n      <div className=\"messages\">\r\n        {messages==[]?\"\":\r\n  messages.map((message) => (\r\n    <div\r\n      className={`message ${message.position}`}\r\n    >\r\n      <strong>{message.sender||message.name}: </strong>{message.message}\r\n    </div>\r\n  ))}\r\n</div>\r\n\r\n      </div>\r\n      <div className=\"footer\">\r\n        <input className=\"foot\"\r\n        required \r\n        autoFocus\r\n          type=\"text\"\r\n          value={message}\r\n          onChange={(e) => setMess(e.target.value)}\r\n        />\r\n        <button onClick={send}>Send</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}